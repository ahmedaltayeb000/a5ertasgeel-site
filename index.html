<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø¢Ø®Ø± ØªØ³Ø¬ÙŠÙ„</title>

  <style>
    /* ========== RESET + GLOBAL ========== */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      background: #050608;
      color: #f5f5f5;
      line-height: 1.7;
    }

    a {
      color: #ff4b4b;
      text-decoration: none;
    }
    a:hover { text-decoration: underline; }

    .page {
      max-width: 1400px;
      width: 100%;
      margin: 0 auto;
      padding: 32px 16px 64px;
    }

    /* ========== Ø´Ø±ÙŠØ· Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ========== */
    .user-bar {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      align-items: center;
      background: #0c0c0c;
      padding: 10px 18px;
      border-bottom: 1px solid rgba(255,255,255,0.05);
      font-size: 13px;
      color: #ccc;
    }

    .user-bar span {
      max-width: 220px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .user-bar a,
    .user-bar button {
      padding: 6px 15px;
      border-radius: 999px;
      background: #15171f;
      border: 1px solid rgba(255,255,255,0.1);
      font-weight: 600;
      text-decoration: none;
      color: #fff;
      font-size: 13px;
      cursor: pointer;
    }

    .user-bar a:hover,
    .user-bar button:hover {
      background: #ff3333;
      border-color: #ff3333;
      color: #fff;
    }

    /* ========== Ø§Ù„Ù‡ÙŠØ¯Ø± Ø¨Ø§Ù„Ø®Ù„ÙÙŠØ© ========== */
    .hero-with-bg {
      position: relative;
      background: url('images/Gemini_Generated_Image_s59qb5s59qb5s59q.jpg') center/cover no-repeat;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 18px 40px rgba(0,0,0,0.65);
      max-width: 1300px;
      width: 100%;
      margin: 0 auto 32px;
      padding: 40px 24px;
      text-align: center;
    }

    .hero-with-bg::before {
      content: "";
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at top, rgba(42,0,0,0.85), rgba(5,6,8,0.96)),
        rgba(0,0,0,0.4);
      backdrop-filter: blur(2px);
    }

    .hero-with-bg * {
      position: relative;
      z-index: 2;
    }

    .hero { border-radius: 20px; text-align: center; }
    .hero-subtitle { margin-top: 16px; font-size: 16px; color: #e0e0e0; }

    .scary-title {
      font-size: 48px;
      text-align: center;
      color: #ff2222;
      position: relative;
      font-family: "Creepster", sans-serif;
      letter-spacing: 3px;
      margin-bottom: 20px;
      animation: glitch 2.5s infinite alternate;
      text-shadow:
        0 0 4px rgba(255, 0, 0, 0.8),
        2px 0 6px rgba(0, 255, 255, 0.4),
        -2px 0 6px rgba(255, 0, 255, 0.4);
    }

    .scary-title::before,
    .scary-title::after {
      content: "ğŸ¦‡";
      position: absolute;
      font-size: 32px;
      animation: fly 3s infinite linear;
      color: #ff2222;
    }

    .scary-title::before { left: -40px; top: -10px; }
    .scary-title::after  { right: -40px; top: -10px; }

    @keyframes fly {
      0%   { transform: translateY(0px) rotate(0deg); }
      50%  { transform: translateY(-10px) rotate(20deg); }
      100% { transform: translateY(0px) rotate(0deg); }
    }

    @keyframes glitch {
      0% { transform: translate(0); }
      20% { transform: translate(-1px, 1px); }
      40% { transform: translate(1px, -1px); }
      60% { transform: translate(0.5px, 0); }
      80% { transform: translate(-0.5px, 0); }
      100% { transform: translate(0); }
    }

    /* Ù„Ù…Ø¨Ø© REC */
    .rec-indicator {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin-top: -6px;
      margin-bottom: 8px;
      font-size: 12px;
      color: #ff7777;
      opacity: 0.95;
    }

    .rec-indicator .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #ff3333;
      box-shadow: 0 0 12px rgba(255,50,50,0.9);
      animation: recBlink 1s infinite;
    }

    .rec-indicator .rec-text {
      letter-spacing: 2px;
    }

    @keyframes recBlink {
      0%, 60% { opacity: 1; }
      61%, 100% { opacity: 0.1; }
    }

    /* ========== Ø£Ù‚Ø³Ø§Ù… Ø¹Ø§Ù…Ø© ========== */
    .section {
      background: #0e1014;
      border-radius: 18px;
      padding: 24px 32px;
      margin: 0 auto 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.6);
      max-width: 1300px;
      width: 100%;
    }

    .section-title {
      font-size: 22px;
      margin-bottom: 10px;
      color: #ffffff;
    }
    .section-text { color: #d5d5d5; font-size: 15px; }

    /* ========== ÙƒØ§Ø±Øª Ù‚ØµØµ Ø±Ø¹Ø¨ +18 ========== */
    .horror18-section {
      max-width: 1300px;
      width: 100%;
      margin: 0 auto 30px;
      background: #0e1014;
      border-radius: 20px;
      padding: 24px 26px 32px;
      box-shadow: 0 14px 35px rgba(0,0,0,0.75);
    }

    .h18-header {
      width: 260px;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      margin-left: 0;
      margin-right: auto;
    }

    .h18-header img {
      width: 100%;
      border-radius: 18px;
      box-shadow: 0 14px 30px rgba(0,0,0,0.8);
      margin-bottom: 12px;
      transition: 0.3s;
    }

    .h18-header:hover img {
      transform: translateY(-4px) scale(1.03);
      box-shadow:
        0 22px 50px rgba(0,0,0,1),
        0 0 30px rgba(255,0,0,0.8);
    }

    .h18-title {
      font-size: 22px;
      color: #ff4444;
      margin-bottom: 12px;
    }

    .h18-btn {
      display: inline-block;
      padding: 10px 26px;
      border-radius: 999px;
      background: #ff3333;
      color: #fff;
      font-weight: 700;
      box-shadow: 0 10px 25px rgba(255,51,51,0.45);
      text-decoration: none;
      transition: 0.25s;
    }

    .h18-btn:hover {
      background: #ff1111;
      transform: translateY(-1px);
    }

    @media (max-width: 768px) {
      .h18-header { margin: 0 auto; }
    }

    /* ========== Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø²Ø§Ø¦Ø± + Ø§Ù„ÙÙˆØ±Ù… ========== */
    .section-visitor {
      position: relative;
      overflow: hidden;
      background: radial-gradient(circle at top, #280000, #050608);
      border-radius: 20px;
      border: 1px solid rgba(255, 80, 80, 0.18);
      box-shadow:
        0 18px 40px rgba(0, 0, 0, 0.85),
        inset 0 0 40px rgba(0, 0, 0, 0.9);
    }

    .section-visitor::before {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at top left, rgba(255,0,0,0.22), transparent 55%),
        radial-gradient(circle at bottom right, rgba(255,0,0,0.12), transparent 55%);
      opacity: 0.9;
      pointer-events: none;
      animation: moveGlow 8s infinite alternate;
    }

    .section-visitor > * {
      position: relative;
      z-index: 1;
    }

    @keyframes moveGlow {
      0%   { transform: translateX(-10px) translateY(0); }
      100% { transform: translateX(10px) translateY(-5px); }
    }

    .visitor-title { text-align: right; font-size: 24px; }
    .visitor-text { margin-top: 10px; font-size: 16px; line-height: 2; color: #e6e6e6; }

    .contact-form {
      margin-top: 22px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .contact-form label {
      color: #ff7777;
      font-weight: 600;
      margin-bottom: 6px;
      font-size: 14px;
      display: block;
    }

    .contact-form input,
    .contact-form textarea {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #ff4444;
      background: #0d0f12;
      color: #ffffff;
      font-size: 14px;
    }

    /* Ø¹Ø´Ø§Ù† Ø§Ù„Ù€ select Ø¨ØªØ§Ø¹ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ÙŠØ¨Ù‚Ù‰ Ø¨Ù†ÙØ³ Ø§Ù„Ø´ÙƒÙ„ */
    .contact-form select {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #ff4444;
      background: #0d0f12;
      color: #ffffff;
      font-size: 14px;
    }

    .contact-form textarea {
      min-height: 130px;
      resize: vertical;
    }

    .contact-form button {
      margin-top: 4px;
      background: #ff3333;
      padding: 10px 20px;
      border-radius: 999px;
      border: none;
      color: #ffffff;
      font-weight: bold;
      font-size: 15px;
      cursor: pointer;
      box-shadow: 0 8px 20px rgba(255, 50, 50, 0.4);
      transition: 0.3s;
    }

    .contact-form button:hover {
      background: #ff1111;
      transform: translateY(-1px);
    }

    .contact-form button:active {
      box-shadow:
        0 0 0 rgba(255,50,50,0),
        0 0 30px rgba(255,50,50,1);
      transform: scale(0.98);
    }

    /* Ø³ÙˆØ´ÙŠØ§Ù„ */
    .social { text-align: center; }
    .social-list {
      list-style: none;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-top: 10px;
    }
    .social-list li a {
      display: inline-block;
      padding: 8px 14px;
      border-radius: 999px;
      background: #15171f;
      border: 1px solid rgba(255,255,255,0.08);
      font-size: 13px;
    }
  </style>
</head>

<body>

  <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
  <div class="user-bar">
    <span id="userLabel">ØºÙŠØ± Ù…Ø³Ø¬Ù‘Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span>

    <!-- ÙŠØ¸Ù‡Ø± Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <a href="profile.html" id="profileLink" style="display:none;">Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</a>

    <!-- Ù„Ù„Ø£Ø¯Ù…Ù† ÙÙ‚Ø· -->
    <a href="dashboard.html" id="dashboardLink" style="display:none;">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>

    <!-- ÙŠØ¸Ù‡Ø± Ù„Ùˆ Ù…Ø´ Ù…Ø³Ø¬Ù‘Ù„ -->
    <a href="login.html" id="loginLink">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>

    <!-- ÙŠØ¸Ù‡Ø± Ù„Ùˆ Ù…Ø³Ø¬Ù‘Ù„ -->
    <button id="logoutBtn" style="display:none;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
  </div>

  <div class="page">

    <header class="hero hero-with-bg">
      <h1 class="scary-title">Ø¢Ø®Ø± ØªØ³Ø¬ÙŠÙ„</h1>

      <div class="rec-indicator">
        <span class="dot"></span>
        <span class="rec-text">REC</span>
      </div>

      <p class="hero-subtitle">
        ÙÙŠ ØºÙØ±Ù <span style="color:#ff3333;">Ù…Ù‚ÙÙˆÙ„Ø©</span> Ù…Ù† Ø³Ù†ÙŠÙ† Ø·ÙˆÙŠÙ„Ø©â€¦  
        Ø§ØªØ®Ø¨Ù‘Ù‰ ÙÙŠÙ‡Ø§ <span style="color:#ff8844;">Ø³Ø±</span> ÙˆØ±Ø§ Ø³Ø±.
        <br><br>
        Ø§Ù„Ù„ÙŠ Ù‡ØªØ³Ù…Ø¹Ù‡ Ù‡Ù†Ø§â€¦  
        Ù…Ø´ Ø®ÙŠØ§Ù„ØŒ Ø¯Ù‡ ØµÙˆØª Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© Ø§Ù„Ù„ÙŠ ÙØ¶Ù„ Ù…Ù† Ù…Ù„ÙØ§Øª Ø§ØªØ®ØªÙ…Øª Ø¨Ù€  
        <span style="color:#ff0000;font-weight:bold;">Ø³Ø±ÙŠ Ø¬Ø¯Ù‹Ø§</span>.
      </p>
    </header>

    <!-- Ù‚Ø³Ù… Ù‚ØµØµ +18 -->
    <section class="horror18-section">
      <div class="h18-header">
        <img src="images/Gemini_Generated_Image_dt2ou7dt2ou7dt2o.jpg" alt="Ù‚ØµØµ Ø±Ø¹Ø¨ +18">
        <h2 class="h18-title">Ù‚ØµØµ Ø±Ø¹Ø¨ +18</h2>
        <a href="h18-stories.html" class="h18-btn">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù‚ØµØµ</a>
      </div>
    </section>

    <!-- Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø²Ø§Ø¦Ø± -->
    <section class="section section-visitor">
      <h2 class="section-title visitor-title">Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø²Ø§Ø¦Ø±</h2>
      <p class="section-text visitor-text">
        Ù„Ùˆ Ø¹Ø´Øª Ù‚ØµØ© Ø±Ø¹Ø¨ Ù„Ø³Ù‡ Ù…Ø´ Ù‚Ø§Ø¯Ø± ØªÙ†Ø³Ø§Ù‡Ø§ØŒ ÙˆØ¹Ø§ÙŠØ² Ù†Ø­ÙˆÙ„Ù‡Ø§ Ù„Ø³Ø±Ø¯ ØµÙˆØªÙŠ Ù‚ÙˆÙŠ ÙˆÙƒØ£Ù†Ùƒ Ø£Ù†Øª Ø§Ù„Ù„ÙŠ Ø¨ØªØ­ÙƒÙŠÙ‡Ø§â€¦<br>
        Ø§Ø¨Ø¹ØªÙ„Ù†Ø§ Ù‚ØµØªÙƒØŒ ÙˆØ§Ø·Ù…Ù†â€¦ Ù‡ÙˆÙŠØªÙƒ ÙÙŠ Ø£Ù…Ø§Ù† ÙˆÙ„Ù† ÙŠØ¸Ù‡Ø± Ø§Ø³Ù…Ùƒ Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„.
      </p>

      <form class="contact-form" action="https://formspree.io/f/xgvjgzek" method="POST">
        <label>
          Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):
          <input type="email" name="email" placeholder="Ù„Ùˆ Ø­Ø§Ø¨Ø¨ Ù†Ø±Ø¯ Ø¹Ù„ÙŠÙƒâ€¦ ÙˆØ¥Ù„Ø§ Ø³ÙŠØ¨Ù‡ ÙØ§Ø¶ÙŠ">
        </label>

        <label>
          Ù‚ØµØªÙƒ Ø£Ùˆ Ø±Ø³Ø§Ù„ØªÙƒ:
          <textarea name="message" required placeholder="Ø§ÙƒØªØ¨ ØªØ¬Ø±Ø¨ØªÙƒØŒ Ù‚ØµØªÙƒØŒ Ø£Ùˆ Ø£ÙŠ Ø´ÙŠØ¡ Ø­Ø§Ø³Ø³ Ø¥Ù†Ù‡ Ø¢Ø®Ø± ØªØ³Ø¬ÙŠÙ„â€¦"></textarea>
        </label>

        <button type="submit">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©</button>
      </form>
    </section>

    <!-- Ù‚Ø³Ù… ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…ÙˆÙ‚Ø¹ -->
    <section class="section">
      <h2 class="section-title">Ù‚ÙŠÙ‘Ù… Ù…ÙˆÙ‚Ø¹ â€œØ¢Ø®Ø± ØªØ³Ø¬ÙŠÙ„â€</h2>
      <p class="section-text">
        Ø±Ø£ÙŠÙƒ ÙŠÙ‡Ù…Ù‘Ù†Ø§ ğŸ‘»â€¦ Ù‚ÙŠÙ‘Ù… ØªØ¬Ø±Ø¨ØªÙƒ Ù…Ø¹ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§ÙƒØªØ¨ Ù„Ù†Ø§ ØªØ¹Ù„ÙŠÙ‚ Ø¨Ø³ÙŠØ· ÙŠØ³Ø§Ø¹Ø¯Ù†Ø§ Ù†Ø·ÙˆÙ‘Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰.
      </p>

      <form id="ratingForm" class="contact-form" style="margin-top:18px;">
        <label>
          ØªÙ‚ÙŠÙŠÙ…Ùƒ Ù„Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† 1 Ø¥Ù„Ù‰ 5:
          <select id="ratingValue" name="rating" required>
            <option value="">Ø§Ø®ØªØ± ØªÙ‚ÙŠÙŠÙ…Ù‹Ø§â€¦</option>
            <option value="5">â­â­â­â­â­ â€“ Ù…Ù…ØªØ§Ø² Ø¬Ø¯Ù‹Ø§</option>
            <option value="4">â­â­â­â­ â€“ Ù…Ù…ØªØ§Ø²</option>
            <option value="3">â­â­â­ â€“ Ø¬ÙŠØ¯</option>
            <option value="2">â­â­ â€“ Ù…Ù‚Ø¨ÙˆÙ„</option>
            <option value="1">â­ â€“ Ø³ÙŠØ¡</option>
          </select>
        </label>

        <label>
          Ø§ÙƒØªØ¨ Ø±Ø£ÙŠÙƒ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ù„ÙƒÙ† Ù…Ù‡Ù…):
          <textarea id="ratingComment" name="comment"
            placeholder="Ø§ÙƒØªØ¨ Ø±Ø£ÙŠÙƒ Ø¨ØµØ±Ø§Ø­Ø©â€¦ Ø¥ÙŠÙ‡ Ø§Ù„Ù„ÙŠ Ø¹Ø¬Ø¨ÙƒØŸ ÙˆØ¥ÙŠÙ‡ Ø§Ù„Ù„ÙŠ Ù…Ø­ØªØ§Ø¬ ÙŠØªØ­Ø³Ù‘Ù†ØŸ"></textarea>
        </label>

        <button type="submit">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</button>

        <p id="ratingMessage" style="margin-top:10px;font-size:14px;color:#9be29b;display:none;">
          Ø´ÙƒØ±Ø§Ù‹ Ù„ØªÙ‚ÙŠÙŠÙ…Ùƒ! ğŸ©¸
        </p>
      </form>
    </section>

    <!-- Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ -->
    <section class="section social">
      <h2 class="section-title">ØªØ§Ø¨Ø¹ â€œØ¢Ø®Ø± ØªØ³Ø¬ÙŠÙ„â€</h2>
      <p class="section-text">Ø£Ø­Ø¯Ø« Ø§Ù„ØªØ³Ø¬ÙŠÙ„Ø§Øª ÙˆØ§Ù„Ù‚ØµØµ Ø¨ØªÙ†Ø²Ù„ Ø£ÙˆÙ„ Ø¨Ø£ÙˆÙ„:</p>
      <ul class="social-list">
        <li><a href="https://www.facebook.com/a5ertasgeel" target="_blank">ğŸ”µ ÙÙŠØ³Ø¨ÙˆÙƒ</a></li>
        <li><a href="#" target="_blank">ğŸ”´ ÙŠÙˆØªÙŠÙˆØ¨</a></li>
        <li><a href="#" target="_blank">âš« ØªÙŠÙƒ ØªÙˆÙƒ</a></li>
        <li><a href="#" target="_blank">ğŸŸ£ Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù…</a></li>
      </ul>
    </section>

  </div>

  <!-- Firebase Auth + Firestore (Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… + Ø§Ù„ØªÙ‚ÙŠÙŠÙ…) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    import {
      getFirestore,
      collection,
      addDoc,
      serverTimestamp
    } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBfs6I2_EDIVi5miIVVD11eowjesjoQs2o",
      authDomain: "a5er-tasgeel.firebaseapp.com",
      projectId: "a5er-tasgeel",
      storageBucket: "a5er-tasgeel.firebasestorage.app",
      messagingSenderId: "239464150088",
      appId: "1:239464150088:web:71a7288812dcfefc9c147d",
      measurementId: "G-ZJRXVJG9JQ"
    };

    const ADMIN_EMAIL = "ahmed.altayeb01000@gmail.com";

    const app  = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db   = getFirestore(app);

    const userLabel      = document.getElementById("userLabel");
    const loginLink      = document.getElementById("loginLink");
    const logoutBtn      = document.getElementById("logoutBtn");
    const profileLink    = document.getElementById("profileLink");
    const dashboardLink  = document.getElementById("dashboardLink");

    // Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
    const ratingForm      = document.getElementById("ratingForm");
    const ratingValueEl   = document.getElementById("ratingValue");
    const ratingCommentEl = document.getElementById("ratingComment");
    const ratingMsgEl     = document.getElementById("ratingMessage");

    let currentUser = null;

    onAuthStateChanged(auth, user => {
      if (user) {
        currentUser = user;
        localStorage.setItem("loggedIn", "true");

        if (userLabel) userLabel.textContent = "Ù…Ø³Ø¬Ù‘Ù„ ÙƒÙ€ " + (user.email || "Ù…Ø³ØªØ®Ø¯Ù…");
        if (loginLink) loginLink.style.display     = "none";
        if (logoutBtn) logoutBtn.style.display     = "inline-block";
        if (profileLink) profileLink.style.display = "inline-block";

        if (dashboardLink) {
          if (user.email === ADMIN_EMAIL) {
            dashboardLink.style.display = "inline-block";
          } else {
            dashboardLink.style.display = "none";
          }
        }

        if (logoutBtn) {
          logoutBtn.onclick = () => {
            signOut(auth).then(() => {
              localStorage.removeItem("loggedIn");
              window.location.href = "index.html";
            });
          };
        }

      } else {
        currentUser = null;
        localStorage.removeItem("loggedIn");

        if (userLabel)      userLabel.textContent       = "ØºÙŠØ± Ù…Ø³Ø¬Ù‘Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„";
        if (loginLink)      loginLink.style.display     = "inline-block";
        if (logoutBtn)      logoutBtn.style.display     = "none";
        if (profileLink)    profileLink.style.display   = "none";
        if (dashboardLink)  dashboardLink.style.display = "none";
      }
    });

    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¥Ù„Ù‰ Firestore
    if (ratingForm) {
      ratingForm.addEventListener("submit", async (e) => {
        e.preventDefault();

        const ratingVal = ratingValueEl.value;
        const comment   = ratingCommentEl.value.trim();

        if (!ratingVal) {
          alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ø®ØªØ± ØªÙ‚ÙŠÙŠÙ…Ù‹Ø§ Ù…Ù† 1 Ø¥Ù„Ù‰ 5.");
          return;
        }

        try {
          await addDoc(collection(db, "siteRatings"), {
            rating: Number(ratingVal),
            comment: comment || null,
            createdAt: serverTimestamp(),
            userEmail: currentUser ? currentUser.email : null,
            userId: currentUser ? currentUser.uid : null
          });

          ratingForm.reset();
          if (ratingMsgEl) ratingMsgEl.style.display = "block";

        } catch (err) {
          console.error("Error saving rating:", err);
          alert("Ø­ØµÙ„ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­ÙØ¸ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…ØŒ Ø¬Ø±Ù‘Ø¨ ØªØ§Ù†ÙŠ Ø¨Ø¹Ø¯ Ø´ÙˆÙŠØ© ğŸ™");
        }
      });
    }
  </script>

  <!-- Botpress -->
  <script src="https://cdn.botpress.cloud/webchat/v3.4/inject.js"></script>
  <script src="https://files.bpcontent.cloud/2025/11/27/22/20251127225403-IQJ9GX5K.js" defer></script>

</body>
</html>
