<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ù‚ØµØµ Ø±Ø¹Ø¨ +18 - Ø¢Ø®Ø± ØªØ³Ø¬ÙŠÙ„</title>

  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; }
    html, body { height: 100%; }
    body { background: #050608; color: #f5f5f5; line-height: 1.7; }
    a { color: #ff4b4b; text-decoration: none; } a:hover { text-decoration: underline; }

    /* ========== Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Dropdown) - Ù…ÙˆØ­Ø¯ ========== */
    .user-bar { display: flex; justify-content: flex-end; align-items: center; background: #0c0c0c; padding: 10px 18px; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 14px; color: #ccc; position: relative; z-index: 100; }
    .user-info-group { display: flex; align-items: center; gap: 12px; cursor: pointer; user-select: none; }
    .welcome-text { font-size: 13px; color: #ddd; }
    .profile-icon-btn { width: 40px; height: 40px; border-radius: 50%; background: #15171f; border: 1px solid rgba(255,255,255,0.2); display: flex; align-items: center; justify-content: center; color: #fff; transition: 0.3s; }
    .profile-icon-btn:hover { background: #ff3333; border-color: #ff3333; }
    .profile-icon-btn svg { width: 20px; height: 20px; fill: currentColor; }
    .dropdown-menu { position: absolute; top: 60px; left: 20px; background: #111; border: 1px solid #333; border-radius: 12px; width: 200px; box-shadow: 0 10px 30px rgba(0,0,0,0.9); display: none; flex-direction: column; overflow: hidden; z-index: 101; }
    .dropdown-menu.show { display: flex; animation: fadeIn 0.2s ease-out; }
    .dropdown-item { padding: 12px 16px; color: #eee; text-decoration: none; font-size: 14px; border-bottom: 1px solid rgba(255,255,255,0.05); transition: 0.2s; display: flex; align-items: center; gap: 10px; cursor: pointer; }
    .dropdown-item:last-child { border-bottom: none; }
    .dropdown-item:hover { background: #1f1f1f; color: #ff3333; text-decoration: none; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

    /* Ø®Ù„ÙÙŠØ© Ø§Ù„ØµÙØ­Ø© */
    .page-bg { position: fixed; inset: 0; background: url('images/Gemini_Generated_Image_u96timu96timu96t.jpg') center/cover no-repeat; filter: brightness(0.23) blur(3px); z-index: 0; animation: bgPulse 22s ease-in-out infinite alternate; transform-origin: center; }
    @keyframes bgPulse { 0% { transform: scale(1) translateY(0); } 100% { transform: scale(1.03) translateY(-8px); } }
    .page { max-width: 1400px; margin: 0 auto; padding: 24px 16px 64px; position: relative; z-index: 1; }

    /* Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø£Ø®Ø±Ù‰ */
    .back-link { margin-bottom: 20px; font-size: 14px; text-align: right; }
    .back-link a { color: #ff3333; font-weight: bold; text-decoration: none; }
    .back-link a:hover { color: #ff5555; }
    .page-title-wrapper { text-align: center; }
    .page-title { position: relative; text-align: center; font-size: 28px; color: #ff3333; margin-bottom: 40px; display: inline-block; padding: 0; background: none; border-radius: 0; animation: neonBlink 2.4s ease-in-out infinite; text-shadow: 0 0 6px rgba(255,0,0,0.4), 0 0 14px rgba(255,0,0,0.7); }
    @keyframes neonBlink { 0%, 20% { opacity: 0.6; text-shadow: 0 0 4px rgba(255,0,0,0.3), 0 0 10px rgba(255,0,0,0.4); } 40% { opacity: 1; text-shadow: 0 0 10px rgba(255,0,0,1), 0 0 22px rgba(255,0,0,0.9), 0 0 32px rgba(255,0,0,0.8); } 60% { opacity: 0.8; text-shadow: 0 0 6px rgba(255,0,0,0.6), 0 0 16px rgba(255,0,0,0.7); } 80%, 100% { opacity: 0.5; text-shadow: 0 0 3px rgba(255,0,0,0.3), 0 0 8px rgba(255,0,0,0.4); } }
    .page-title::before, .page-title::after { content: ""; position: absolute; top: 100%; background: linear-gradient(to bottom, #ff3333, rgba(120,0,0,0)); border-radius: 0 0 999px 999px; opacity: 0.9; transform-origin: top; animation: drip 3.2s infinite ease-in-out; }
    .page-title::before { left: 45%; width: 10px; height: 26px; animation-delay: 0.3s; } .page-title::after { left: 25%; width: 6px; height: 18px; animation-delay: 1.1s; }
    @keyframes drip { 0% { transform: scaleY(0); opacity: 0; } 30% { transform: scaleY(1); opacity: 0.95; } 70% { transform: scaleY(0.3); opacity: 0.6; } 100% { transform: scaleY(0); opacity: 0; } }

    /* ÙƒØ±ÙˆØª Ø§Ù„Ù‚ØµØµ */
    .stories-wrap { display: flex; justify-content: flex-end; }
    .story-card { background: rgba(5, 6, 10, 0.96); border-radius: 22px; padding: 22px 20px 24px; text-align: center; box-shadow: 0 18px 40px rgba(0,0,0,0.9), 0 0 24px rgba(0,0,0,0.9); width: 340px; backdrop-filter: blur(2px); }
    .story-image { width: 100%; border-radius: 16px; margin-bottom: 14px; box-shadow: 0 12px 28px rgba(0,0,0,0.85); }
    .story-title { font-size: 20px; margin-bottom: 6px; color: #ffffff; }
    .story-tag { font-size: 13px; color: #cccccc; margin-bottom: 14px; }
    .story-actions { display: flex; justify-content: center; align-items: center; gap: 10px; }
    .story-age { background: #b30000; color: #fff; padding: 7px 11px; border-radius: 10px; font-weight: bold; font-size: 13px; box-shadow: 0 8px 20px rgba(179,0,0,0.7); }
    .story-btn { background: #ff3333; color: white; padding: 8px 16px; border-radius: 12px; text-decoration: none; font-weight: bold; font-size: 14px; transition: 0.3s; box-shadow: 0 10px 24px rgba(255,51,51,0.6); }
    .story-btn:hover { background: #ff4444; text-decoration: none; transform: translateY(-1px); }
    @media (max-width: 768px) { .stories-wrap { justify-content: center; } .story-card { width: 90%; } }
  </style>
</head>
<body>

  <div class="user-bar">
    <div class="user-info-group" id="userMenuTrigger">
      <span class="welcome-text" id="welcomeMsg">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span>
      <div class="profile-icon-btn" id="profileIconContainer">
        </div>
    </div>
    <div class="dropdown-menu" id="userDropdown">
      <a href="profile.html" class="dropdown-item">ğŸ‘¤ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</a>
      <a href="dashboard.html" class="dropdown-item" id="dashItem" style="display:none;">âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
      <div class="dropdown-item" id="logoutItem">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</div>
    </div>
  </div>

  <div class="page-bg"></div>

  <div class="page">
    <div class="back-link">
      <a href="index.html">â¬…ï¸ Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    </div>

    <div class="page-title-wrapper">
      <h1 class="page-title">Ù‚ØµØµ Ø±Ø¹Ø¨ +18</h1>
    </div>

    <div class="stories-wrap">
      <div class="story-card">
        <img src="images/imagesGemini_Generated_Image_ivkwrtivkwrtivkw.jpg" alt="Ù†ÙˆÙŠÙ…ÙŠØ§ ÙˆØ§Ù„ÙƒÙŠØ§Ù†" class="story-image">
        <h2 class="story-title">Ù†ÙˆÙŠÙ…ÙŠØ§ ÙˆØ§Ù„ÙƒÙŠØ§Ù†</h2>
        <p class="story-tag">Ù‚ØµØ© Ø±Ø¹Ø¨ Ø­Ù‚ÙŠÙ‚ÙŠØ©</p>
        <div class="story-actions">
          <span class="story-age">+18</span>
          <a href="noemia.html" class="story-btn">Ø§Ø¯Ø®Ù„ Ø§Ù„Ù‚ØµØ©</a>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBfs6I2_EDIVi5miIVVD11eowjesjoQs2o",
      authDomain: "a5er-tasgeel.firebaseapp.com",
      projectId: "a5er-tasgeel",
      storageBucket: "a5er-tasgeel.firebasestorage.app",
      messagingSenderId: "239464150088",
      appId: "1:239464150088:web:71a7288812dcfefc9c147d",
      measurementId: "G-ZJRXVJG9JQ"
    };

    const ADMIN_EMAIL = "ahmed.altayeb01000@gmail.com";
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù„ÙˆÙŠØ©
    const userMenuTrigger = document.getElementById("userMenuTrigger");
    const welcomeMsg = document.getElementById("welcomeMsg");
    const profileIconContainer = document.getElementById("profileIconContainer");
    const userDropdown = document.getElementById("userDropdown");
    const dashItem = document.getElementById("dashItem");
    const logoutItem = document.getElementById("logoutItem");

    const iconLoggedIn = `<svg viewBox="0 0 16 16"><path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/></svg>`;
    const iconGuest = `<svg viewBox="0 0 16 16"><path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1zM4.97 3.03a.75.75 0 0 0-1.06 1.06L6.94 7.12l-1.97 1.97a.75.75 0 1 0 1.06 1.06L8 8.18l1.97 1.97a.75.75 0 1 0 1.06-1.06L9.06 7.12l1.97-1.97a.75.75 0 1 0-1.06-1.06L8 6.06 6.03 4.09 4.97 3.03z"/></svg>`;

    let isUserLoggedIn = false;

    // Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
    userMenuTrigger.addEventListener("click", (e) => {
      e.stopPropagation();
      if (isUserLoggedIn) { userDropdown.classList.toggle("show"); } else { window.location.href = "login.html"; }
    });
    document.addEventListener("click", () => { userDropdown.classList.remove("show"); });

    onAuthStateChanged(auth, user => {
      if (user) {
        isUserLoggedIn = true;
        localStorage.setItem("loggedIn", "true");
        const fullName = user.displayName || user.email.split('@')[0];
        const firstName = fullName.split(' ')[0];
        welcomeMsg.innerHTML = `Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ <span style="color:#ff3333;font-weight:bold;">${firstName}</span> ÙÙŠ Ø¢Ø®Ø± ØªØ³Ø¬ÙŠÙ„`;
        profileIconContainer.innerHTML = iconLoggedIn;
        profileIconContainer.style.background = "#15171f";
        
        if (user.email === ADMIN_EMAIL) { dashItem.style.display = "flex"; } else { dashItem.style.display = "none"; }
        
        logoutItem.onclick = () => {
          signOut(auth).then(() => {
            localStorage.removeItem("loggedIn");
            window.location.href = "index.html";
          });
        };
      } else {
        isUserLoggedIn = false;
        localStorage.removeItem("loggedIn");
        welcomeMsg.innerHTML = "ØºÙŠØ± Ù…Ø³Ø¬Ù‘Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„";
        profileIconContainer.innerHTML = iconGuest;
        profileIconContainer.style.background = "#330000";
      }
    });
  </script>

</body>
</html>
